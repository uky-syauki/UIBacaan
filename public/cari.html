<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="./assets/img/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        BACAAN
    </title>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
    <!-- Nucleo Icons -->
    <link href="./assets/css/nucleo-icons.css" rel="stylesheet" />
    <link href="./assets/css/nucleo-svg.css" rel="stylesheet" />
    <!-- Font Awesome Icons -->
    <link href="./assets/css/font-awesome.css" rel="stylesheet" />
    <link href="./assets/css/nucleo-svg.css" rel="stylesheet" />
    <!-- CSS Files -->
    <link href="./assets/css/argon-design-system.css?v=1.2.2" rel="stylesheet" />
</head>

<body class="index-page">
    <!-- Navbar -->
    <nav id="navbar-main"
        class="navbar navbar-main navbar-expand-lg bg-new-dark navbar-light position-sticky top-0 shadow py-2">
        <div class="container">
            <a class="navbar-brand mr-lg-5" href="./index.html">
                <img src="./assets/img/logo-dark.png">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_global"
                aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbar_global">
                <div class="navbar-collapse-header">
                    <div class="row">
                        <div class="col-6 collapse-brand">
                            <a href="./index.html">
                                <img src="./assets/img/logo-dark.png">
                            </a>
                        </div>
                        <div class="col-6 collapse-close">
                            <button type="button" class="navbar-toggler" data-toggle="collapse"
                                data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false"
                                aria-label="Toggle navigation">
                                <span></span>
                                <span></span>
                            </button>
                        </div>
                    </div>
                </div>

                <ul class="navbar-nav align-items-lg-center ml-lg-auto">
                    <li class="nav-item">
                        <a class="nav-link nav-link-icon" href="https://www.facebook.com/CreativeTim/"
                            data-toggle="tooltip" title="Like us on Facebook">
                            <i class="fa fa-facebook-square"></i>
                            <span class="nav-link-inner--text d-lg-none">Facebook</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-link-icon" href="https://www.instagram.com/creativetimofficial"
                            data-toggle="tooltip" title="Follow us on Instagram">
                            <i class="fa fa-instagram"></i>
                            <span class="nav-link-inner--text d-lg-none">Instagram</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-link-icon" href="https://twitter.com/creativetim" data-toggle="tooltip"
                            title="Follow us on Twitter">
                            <i class="fa fa-twitter-square"></i>
                            <span class="nav-link-inner--text d-lg-none">Twitter</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    <div class="wrapper">
        <div class="section section-hero section-shaped">
            <div class="shape shape-style-1 shape-primary">
            </div>
            <div class="page-header">
                <div class="container shape-container d-flex align-items-center py-lg">
                    <div class="col px-0">
                        <div class="row">
                            <div class="form-group col-md-8 w-70">
                                <input id="input-cari" aria-describedby="addon-right addon-left" placeholder="Cari sesuatu" class="form-control"> <!---->  <!---->
                            </div>
                        <div class="form-group col-md-4 w-30">
                            <button onclick="mencari()" class="form-control">Cari</button>
                        </div>
                        </div>
                        <!-- start content -->

                        <!-- <div class="row mb-1">
                            <div class="col-md-2 mw20">
                                <p class="display-5 tengah text-white">QS:1</p>
                            </div>
                            <div class="col-md-8 mw50">
                                <p class="display-5 tengah text-white">Al-Fatihah</p>
                            </div>
                            <div class="col-md-2 mw30">
                                <p class="display-5 tengah text-white">286 ayat</p>
                            </div>
                        </div>
                        <hr class="text-white"> -->

                        <div class="row mb-4">
                            <div class="col-md-2 mw20">
                                <h5 class="tengah text-white">Cari:<span id="id-surah"></span></h5>
                            </div>
                            <div class="col-md-8 mw50">
                                <h5 class="tengah text-white"><span id="nama-surah"></span></h5>
                            </div>
                            <div class="col-md-2 mw30">
                                <h5 class="tengah text-white"><span id="jumlah-ayat"></span> ayat</h5>
                            </div>
                        </div>
                        <!-- <hr> -->

                        <!-- end contet -->

                        <div class="row align-items-center justify-content-center">
                            <div class="col-lg-6 text-center">
                                <img src="./assets/img/bismillah.svg" style="width: 220px;" class="img-fluid mb-2">
                                <!-- <p class="display-5 text-white aj">“Bacalah dengan (menyebut) nama Rabbmu Yang
                                    menciptakan, Dia telah menciptakan manusia dari segumpal darah. Bacalah, dan
                                    Rabbmulah Yang Maha Pemurah. Yang mengajar (manusia) dengan perantaran qolam (pena).
                                    Dia mengajar kepada manusia apa yang tidak diketahuinya.” (QS. Al 'Alaq: 1-5)</p>\
                                <div class="btn-wrapper mt-2">
                                    <a href="./formulir.html" class="btn btn-lg btn-white btn-icon mb-3 mb-sm-0">
                                        <span class="btn-inner--icon"><i class="ni ni-single-copy-04"></i></span>
                                        <span class="btn-inner--text">Mulai Al-Fatihah</span>
                                    </a>
                                </div>
                                <div class="mt-5">
                                    <small class="font-weight-bold mb-0 mr-2 text-white">Made by</small>
                                    <img src="./assets/img/logococonut.png" style="height: 28px;">
                                </div> -->
                            </div>

                            <!-- start text content -->
                            <div class="container" id="ayat">
                            </div>
                            <!-- end text content -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="container container-lg">
            <div class="row">

                <div class="container ct-example-row">

                    <!-- <div class="w-100"></div> -->
                    <div class="row" id="list-surah">

                    </div>
                </div>

            </div>
        </div>
        <div class="container">
            <div class="row row-grid align-items-center my-md">
                <div class="col-lg-6">
                    <!-- <h3 class="text-primary font-weight-light mb-2">QS:AL-MAIDAH:16</h3> -->
                    <p class="display-5 mb-0 font-weight-bold text-white">
                        Dengan Kitab itulah Allah memberi petunjuk kepada orang yang mengikuti keridaan-Nya ke jalan
                        keselamatan, dan (dengan Kitab itu pula) Allah mengeluarkan orang itu dari gelap gulita kepada
                        cahaya dengan izin-Nya, dan menunjukkan ke jalan yang lurus <br>
                        <b><i>(QS:AL-MAIDAH:16)</i></b>
                    </p>
                </div>
                <div class="col-lg-6 text-lg-center btn-wrapper">
                    <button href="https://twitter.com/creativetim" rel="nofollow"
                        class="btn btn-icon-only btn-twitter rounded-circle" data-toggle="tooltip"
                        data-original-title="Follow us">
                        <span class="btn-inner--icon"><i class="fa fa-twitter"></i></span>
                    </button>
                    <button href="https://www.facebook.com/CreativeTim/" rel="nofollow"
                        class="btn-icon-only rounded-circle btn btn-facebook" data-toggle="tooltip"
                        data-original-title="Like us">
                        <span class="btn-inner--icon"><i class="fab fa-facebook"></i></span>
                    </button>
                    <button href="https://dribbble.com/creativetim" rel="nofollow"
                        class="btn btn-icon-only btn-dribbble rounded-circle" data-toggle="tooltip"
                        data-original-title="Follow us">
                        <span class="btn-inner--icon"><i class="fa fa-dribbble"></i></span>
                    </button>
                    <button href="https://github.com/creativetimofficial" rel="nofollow"
                        class="btn btn-icon-only btn-github rounded-circle" data-toggle="tooltip"
                        data-original-title="Star on Github">
                        <span class="btn-inner--icon"><i class="fa fa-github"></i></span>
                    </button>
                </div>
            </div>
            <!-- <hr> -->
            <div class="row align-items-center justify-content-md-between">
                <div class="col-md-6">
                    <div class="copyright">
                        &copy; 2024 <a href="">Bacaan</a>.
                    </div>
                </div>
                <div class="col-md-6">
                    <ul class="nav nav-footer justify-content-end">
                        <li class="nav-item">
                            <a href="" class="nav-link">Beranda</a>
                        </li>
                        <li class="nav-item">
                            <a href="" class="nav-link">About Us</a>
                        </li>
                        <li class="nav-item">
                            <a href="" class="nav-link">Blog</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
</body>
<!--   Core JS Files   -->
<script src="./assets/js/core/jquery.min.js" type="text/javascript"></script>
<script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="./assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<script src="./assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="./assets/js/plugins/bootstrap-switch.js"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="./assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
<script src="./assets/js/plugins/moment.min.js"></script>
<script src="./assets/js/plugins/datetimepicker.js" type="text/javascript"></script>
<script src="./assets/js/plugins/bootstrap-datepicker.min.js"></script>
<!-- Control Center for Argon UI Kit: parallax effects, scripts for the example pages etc -->
<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<script src="./assets/js/argon-design-system.min.js?v=1.2.2" type="text/javascript"></script>
<script>
    function scrollToDownload() {

        if ($('.section-download').length != 0) {
            $("html, body").animate({
                scrollTop: $('.section-download').offset().top
            }, 1000);
        }
    }


    // Membuat objek URLSearchParams dari query string URL

    const urlParams = new URLSearchParams(window.location.search);

    // Mengambil nilai parameter 'nama' dari URL
    const nama = urlParams.get('kata');

    //const namaPendaftar = 'Muh dayat'; // Ganti dengan nama pendaftar yang ingin Anda ambil data

    // URL endpoint Flask API
    // const apiUrl = `https://bacaan.pythonanywhere.com/api/cari-ayat/${nama}`;
    const apiUrl = `http://localhost:5000/api/cari-ayat2/${nama}`;
    // const apiUrl = `http://localhost:5000/api/cari/${nama}`;
    console.log(apiUrl);
    // Konfigurasi permintaan
    const requestOptions = {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    };
    let judul = document.getElementById('nama-surah');
            judul.innerText = "Loading.....";

    // Melakukan fetch ke API Flask
    fetch(apiUrl, requestOptions)
        .then(response => {
            if (!response.ok) {
                throw new Error('Terjadi kesalahan saat melakukan permintaan.');
            }
            return response.json(); // Mengubah respon menjadi objek JavaScript
        })
        .then(data => {
            // document.getElementById('id-surah').innerText = data['jumlah'];
            // document.getElementById('nama-surah').innerText = data['nama_surah'];
            let judul = document.getElementById('nama-surah');
            judul.innerText = "Loading.....";
            document.getElementById('jumlah-ayat').innerText = data['jumlah'];
            const ayat = document.getElementById('ayat');
            data['ayat'].forEach(element => {
                console.log(element.split("\n"));
                const row = document.createElement("div");
                row.classList.add("row");
                // const id_ayat = document.createElement("p");
                // id_ayat.classList.add("col-md-2", "mw-5", "text-white");
                const text_ayat = document.createElement("p");
                text_ayat.classList.add("col-md-12", "text-white", "aj");

                // id_ayat.innerText = `${key}.`;
                const tmp = element.split("\n");
                text_ayat.innerHTML = `<span class='font-weight-bold'>${tmp[0]}</span> ${tmp[1]}`;

                // console.log(key, data['ayat'][key]);
                // row.appendChild(id_ayat);
                row.appendChild(text_ayat);
                ayat.appendChild(row);
            });
            let n = 0
            judul.innerText = data['nama_surah'];

            const divList = document.getElementById("list-surah");
            // data['rekomendasi'].forEach(element => {
            //     n++;
            //     const spanElement = document.createElement("span");
            //     spanElement.classList.add("col-md-3", "w50");
            //     spanElement.innerHTML =
            //         `<button onclick="pindah('${element}')" class="text-white w100 mb-2 btn btn-outline-default">${element}</button>`;

            //     divList.appendChild(spanElement);
            // });
            // Lakukan operasi lainnya dengan data pendaftar jika diperlukan
        })
        .catch(error => {
            console.error('Ada kesalahan:', error); // Menampilkan kesalahan jika permintaan gagal
        });

    function pindah(ke) {
        console.log(ke);
        window.location.href = `tampilkan.html?surah=${ke}`;
    }

    function mencari(){
        let judul = document.getElementById('nama-surah')
        judul.innerText = "Loading....."
        const kata = document.getElementById("input-cari").value;
        if (kata == ""){
            console.log("False");
        } else {
            console.log(kata);
            window.location.href = `cari.html?kata=${kata}`;
        }
    }
</script>
<script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
</script>

</html>